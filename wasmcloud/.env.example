# Ekko Cluster wasmCloud Environment Configuration Example
# Copy this file to .env and modify as needed for your environment

# === INFRASTRUCTURE ===

# NATS Configuration
NATS_URL=nats://localhost:4222
NATS_CLIENT_NAME=ekko-dev
NATS_CLUSTER_URL=nats://localhost:4222

# Redis Configuration  
REDIS_URL=redis://localhost:6379
REDIS_PASSWORD=

# === S3/MINIO CONFIGURATION ===

# MinIO/S3 Endpoint (use localhost for local dev, S3 URL for production)
S3_ENDPOINT=http://localhost:9000
S3_REGION=us-east-1
S3_BUCKET=ekko-delta-lake
S3_ACCESS_KEY_ID=minioadmin
S3_SECRET_ACCESS_KEY=minioadmin

# === DELTA LAKE CONFIGURATION ===

# Delta Lake Provider Configuration
DELTA_LAKE_S3_ENDPOINT=http://localhost:9000
DELTA_LAKE_S3_REGION=us-east-1
DELTA_LAKE_S3_BUCKET=ekko-delta-lake
DELTA_LAKE_S3_ACCESS_KEY_ID=minioadmin
DELTA_LAKE_S3_SECRET_ACCESS_KEY=minioadmin

# Delta Lake Settings
DELTA_LAKE_BASE_PATH=s3://ekko-delta-lake
DELTA_LAKE_ENABLE_OPTIMIZATION=true
DELTA_LAKE_OPTIMIZATION_INTERVAL_HOURS=24
DELTA_LAKE_DEFAULT_RETENTION_HOURS=168
DELTA_LAKE_MAX_BATCH_SIZE=10000
DELTA_LAKE_ENABLE_METRICS=false

# === DUCKLAKE CONFIGURATION ===

# DuckLake Provider Configuration (DuckDB-based lakehouse)
# PostgreSQL Metadata Catalog (stores table schemas, snapshots, file tracking, ACID log)
DUCKLAKE_POSTGRES_HOST=localhost
DUCKLAKE_POSTGRES_PORT=5432
DUCKLAKE_POSTGRES_DATABASE=ducklake_catalog
DUCKLAKE_POSTGRES_USER=ekko
DUCKLAKE_POSTGRES_PASSWORD=ekko123

# S3/MinIO Data Storage (stores Parquet data files)
DUCKLAKE_S3_ENDPOINT=http://localhost:9000
DUCKLAKE_S3_REGION=us-east-1
DUCKLAKE_S3_BUCKET=ekko-ducklake
DUCKLAKE_S3_ACCESS_KEY_ID=minioadmin
DUCKLAKE_S3_SECRET_ACCESS_KEY=minioadmin
DUCKLAKE_S3_USE_SSL=false

# DuckLake Warehouse Settings
DUCKLAKE_WAREHOUSE_PATH=/ekko/ducklake
DUCKLAKE_MAX_CONNECTIONS=4
DUCKLAKE_MEMORY_LIMIT_MB=512
DUCKLAKE_THREADS=4
DUCKLAKE_TEMP_DIR=/tmp/ducklake

# DuckLake Optimization
DUCKLAKE_ENABLE_OPTIMIZATION=true
DUCKLAKE_MAX_BATCH_SIZE=10000
DUCKLAKE_ENABLE_METRICS=false

# NATS Transaction Ingestion
# Subject pattern: blockchain.{network}.{subnet}.transactions.{stage}
TRANSACTION_SUBJECT=blockchain.ethereum.mainnet.transactions.processed

# === WASMCLOUD CONFIGURATION ===

# wasmCloud Lattice Configuration
WASMCLOUD_LATTICE=ekko-dev
WASMCLOUD_RPC_HOST=0.0.0.0
WASMCLOUD_RPC_PORT=4000
WASMCLOUD_CTL_HOST=0.0.0.0
WASMCLOUD_CTL_PORT=4001
WASMCLOUD_NATS_HOST=localhost
WASMCLOUD_NATS_PORT=4222
WASMCLOUD_LOG_LEVEL=debug

# Provider Instance IDs (auto-generated if not set)
DELTA_LAKE_PROVIDER_INSTANCE_ID=
DUCKLAKE_PROVIDER_INSTANCE_ID=
NEWHEADS_PROVIDER_INSTANCE_ID=

# === BLOCKCHAIN CONFIGURATION ===

# Ethereum Configuration
ETH_RPC_URL=https://eth-mainnet.alchemyapi.io/v2/YOUR_API_KEY
ETH_WS_URL=wss://eth-mainnet.alchemyapi.io/v2/YOUR_API_KEY
ETH_TESTNET_RPC_URL=https://eth-goerli.alchemyapi.io/v2/YOUR_API_KEY

# Bitcoin Configuration  
BTC_RPC_URL=https://blockstream.info/api
BTC_TESTNET_RPC_URL=https://blockstream.info/testnet/api

# Solana Configuration
SOL_RPC_URL=https://api.mainnet-beta.solana.com
SOL_TESTNET_RPC_URL=https://api.testnet.solana.com

# === MONITORING ===

# Prometheus Configuration
PROMETHEUS_URL=http://localhost:9090

# Grafana Configuration  
GRAFANA_URL=http://localhost:3000
GRAFANA_ADMIN_PASSWORD=admin

# Metrics Collection
ENABLE_METRICS=true
METRICS_PORT=8080

# === DEVELOPMENT SETTINGS ===

# Log Levels
LOG_LEVEL=debug
RUST_LOG=debug

# Development Flags
DEV_MODE=true
ENABLE_DEBUG_ENDPOINTS=true
