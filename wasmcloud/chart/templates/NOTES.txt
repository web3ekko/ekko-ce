{{- $namespace := .Release.Namespace -}}
============================================
ğŸš€ WasmCloud Platform Deployed Successfully!
============================================

Release Name: {{ .Release.Name }}
Namespace: {{ $namespace }}
Chart Version: {{ .Chart.Version }}

ğŸ“‹ Components Deployed:
------------------------
{{- if index .Values "wasmcloud-platform" "operator" "enabled" }}
âœ… WasmCloud Operator
{{- end }}
{{- if index .Values "wasmcloud-platform" "wadm" "enabled" }}
âœ… WADM (Application Deployment Manager)
{{- end }}
{{- if index .Values "wasmcloud-platform" "hostConfig" "enabled" }}
âœ… WasmCloud Host ({{ index .Values "wasmcloud-platform" "hostConfig" "hostReplicas" }} replicas)
{{- end }}
{{- if .Values.providers.newheads.enabled }}
âœ… Newheads Blockchain Provider
{{- end }}
{{- if .Values.providers.websocket.enabled }}
âœ… WebSocket Notification Provider
{{- end }}
{{- if .Values.providers.alertScheduler.enabled }}
âœ… Alert Scheduler Provider
{{- end }}
{{- if .Values.providers.ducklake.enabled }}
âœ… DuckLake Storage Provider
{{- end }}

ğŸ”Œ Connections:
---------------
NATS: {{ .Values.nats.url }}
Redis: {{ .Values.redis.url }}

ğŸ“¡ To connect wash CLI to the WasmCloud platform:
--------------------------------------------------
{{- if ne $namespace "default" }}
kubectl --namespace {{ $namespace }} port-forward service/nats 4222:4222 4223:4223
{{- else }}
kubectl port-forward service/nats 4222:4222 4223:4223
{{- end }}

Then in another terminal:
wash ctx new ekko --lattice default

ğŸ” To check WasmCloud host status:
-----------------------------------
wash get hosts

ğŸ“¦ To deploy WADM applications:
--------------------------------
wash app list
wash app deploy /path/to/wadm.yaml

{{- if .Values.ingress.enabled }}

ğŸŒ Ingress URLs:
----------------
{{- range .Values.ingress.hosts }}
- http{{ if $.Values.ingress.tls }}s{{ end }}://{{ .host }}
{{- end }}
{{- end }}

{{- if .Values.service.type | eq "NodePort" }}

ğŸ”— NodePort Services:
---------------------
To access WebSocket service:
kubectl get svc {{ include "wasmcloud.fullname" . }}-websocket -n {{ $namespace }}
Then access the NodePort via your cluster IP (OrbStack: `orbstack ip`)
{{- end }}

ğŸ“Š To check provider and actor health:
---------------------------------------
kubectl get pods -n {{ $namespace }} -l app.kubernetes.io/name={{ include "wasmcloud.name" . }}
kubectl logs -n {{ $namespace }} -l app.kubernetes.io/name={{ include "wasmcloud.name" . }}

âš ï¸  Important Notes:
--------------------
- WasmCloud is configured to use existing NATS and Redis instances
- Providers and actors will be deployed via WADM after host is ready
- Check logs if providers fail to connect to blockchain nodes

For more information, visit: https://wasmcloud.com/docs
